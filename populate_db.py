import asyncio
from sqlalchemy.ext.asyncio import create_async_engine, AsyncSession, async_sessionmaker
from models import Base, MenuItem
from config import DATABASE_URL

# –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –º–µ–Ω—é
MENU_DATA = [
    # –ö–æ—Ñ–µ –∏ –≥–æ—Ä—è—á–∏–µ –Ω–∞–ø–∏—Ç–∫–∏
    {"category": "–ö–æ—Ñ–µ –∏ –≥–æ—Ä—è—á–∏–µ –Ω–∞–ø–∏—Ç–∫–∏", "name": "–ê–º–µ—Ä–∏–∫–∞–Ω–æ", "price": 800.0},
    {"category": "–ö–æ—Ñ–µ –∏ –≥–æ—Ä—è—á–∏–µ –Ω–∞–ø–∏—Ç–∫–∏", "name": "–ö–∞–ø—É—á–∏–Ω–æ", "price": 1200.0},
    {"category": "–ö–æ—Ñ–µ –∏ –≥–æ—Ä—è—á–∏–µ –Ω–∞–ø–∏—Ç–∫–∏", "name": "–õ–∞—Ç—Ç–µ", "price": 1300.0},
    {"category": "–ö–æ—Ñ–µ –∏ –≥–æ—Ä—è—á–∏–µ –Ω–∞–ø–∏—Ç–∫–∏", "name": "–≠—Å–ø—Ä–µ—Å—Å–æ", "price": 700.0},
    {"category": "–ö–æ—Ñ–µ –∏ –≥–æ—Ä—è—á–∏–µ –Ω–∞–ø–∏—Ç–∫–∏", "name": "–†–∞—Ñ –∫–æ—Ñ–µ", "price": 1400.0},
    {"category": "–ö–æ—Ñ–µ –∏ –≥–æ—Ä—è—á–∏–µ –Ω–∞–ø–∏—Ç–∫–∏", "name": "–§–ª—ç—Ç —É–∞–π—Ç", "price": 1300.0},
    {"category": "–ö–æ—Ñ–µ –∏ –≥–æ—Ä—è—á–∏–µ –Ω–∞–ø–∏—Ç–∫–∏", "name": "–ì–æ—Ä—è—á–∏–π —à–æ–∫–æ–ª–∞–¥", "price": 1000.0},
    {"category": "–ö–æ—Ñ–µ –∏ –≥–æ—Ä—è—á–∏–µ –Ω–∞–ø–∏—Ç–∫–∏", "name": "–ß–∞–π —á–µ—Ä–Ω—ã–π", "price": 500.0},
    {"category": "–ö–æ—Ñ–µ –∏ –≥–æ—Ä—è—á–∏–µ –Ω–∞–ø–∏—Ç–∫–∏", "name": "–ß–∞–π –∑–µ–ª–µ–Ω—ã–π", "price": 500.0},
    {"category": "–ö–æ—Ñ–µ –∏ –≥–æ—Ä—è—á–∏–µ –Ω–∞–ø–∏—Ç–∫–∏", "name": "–ì–ª–∏–Ω—Ç–≤–µ–π–Ω", "price": 1500.0},

    # –•–æ–ª–æ–¥–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏
    {"category": "–•–æ–ª–æ–¥–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏", "name": "–ê–π—Å –ª–∞—Ç—Ç–µ", "price": 1400.0},
    {"category": "–•–æ–ª–æ–¥–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏", "name": "–ê–π—Å –∞–º–µ—Ä–∏–∫–∞–Ω–æ", "price": 900.0},
    {"category": "–•–æ–ª–æ–¥–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏", "name": "–§—Ä–∞–ø–ø–µ", "price": 1600.0},
    {"category": "–•–æ–ª–æ–¥–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏", "name": "–õ–∏–º–æ–Ω–∞–¥ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π", "price": 800.0},
    {"category": "–•–æ–ª–æ–¥–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏", "name": "–õ–∏–º–æ–Ω–∞–¥ —è–≥–æ–¥–Ω—ã–π", "price": 900.0},
    {"category": "–•–æ–ª–æ–¥–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏", "name": "–°–æ–∫ –∞–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π", "price": 700.0},
    {"category": "–•–æ–ª–æ–¥–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏", "name": "–°–æ–∫ —è–±–ª–æ—á–Ω—ã–π", "price": 700.0},
    {"category": "–•–æ–ª–æ–¥–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏", "name": "–ú–æ—Ä—Å –∫–ª—é–∫–≤–µ–Ω–Ω—ã–π", "price": 600.0},

    # –í—ã–ø–µ—á–∫–∞
    {"category": "–í—ã–ø–µ—á–∫–∞", "name": "–ö—Ä—É–∞—Å—Å–∞–Ω —Å —à–æ–∫–æ–ª–∞–¥–æ–º", "price": 600.0},
    {"category": "–í—ã–ø–µ—á–∫–∞", "name": "–ö—Ä—É–∞—Å—Å–∞–Ω —Å –≤–µ—Ç—á–∏–Ω–æ–π –∏ —Å—ã—Ä–æ–º", "price": 800.0},
    {"category": "–í—ã–ø–µ—á–∫–∞", "name": "–ë—É–ª–æ—á–∫–∞ —Å –∫–æ—Ä–∏—Ü–µ–π", "price": 500.0},
    {"category": "–í—ã–ø–µ—á–∫–∞", "name": "–ú–∞—Ñ—Ñ–∏–Ω —á–µ—Ä–Ω–∏—á–Ω—ã–π", "price": 700.0},
    {"category": "–í—ã–ø–µ—á–∫–∞", "name": "–ú–∞—Ñ—Ñ–∏–Ω —à–æ–∫–æ–ª–∞–¥–Ω—ã–π", "price": 700.0},
    {"category": "–í—ã–ø–µ—á–∫–∞", "name": "–ü–∏—Ä–æ–∂–æ–∫ —Å —è–±–ª–æ–∫–æ–º", "price": 600.0},
    {"category": "–í—ã–ø–µ—á–∫–∞", "name": "–ß–µ–±—É—Ä–µ–∫", "price": 1200.0},
    {"category": "–í—ã–ø–µ—á–∫–∞", "name": "–•–∞—á–∞–ø—É—Ä–∏", "price": 1000.0},
    {"category": "–í—ã–ø–µ—á–∫–∞", "name": "–°–∞–º—Å–∞ —Å –º—è—Å–æ–º", "price": 800.0},
    {"category": "–í—ã–ø–µ—á–∫–∞", "name": "–ë–µ–ª—è—à", "price": 700.0},

    # –¢–æ—Ä—Ç—ã –∏ –¥–µ—Å–µ—Ä—Ç—ã
    {"category": "–¢–æ—Ä—Ç—ã –∏ –¥–µ—Å–µ—Ä—Ç—ã", "name": "–ù–∞–ø–æ–ª–µ–æ–Ω (–∫—É—Å–æ—á–µ–∫)", "price": 1500.0},
    {"category": "–¢–æ—Ä—Ç—ã –∏ –¥–µ—Å–µ—Ä—Ç—ã", "name": "–¢–∏—Ä–∞–º–∏—Å—É", "price": 1800.0},
    {"category": "–¢–æ—Ä—Ç—ã –∏ –¥–µ—Å–µ—Ä—Ç—ã", "name": "–ß–∏–∑–∫–µ–π–∫ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π", "price": 1600.0},
    {"category": "–¢–æ—Ä—Ç—ã –∏ –¥–µ—Å–µ—Ä—Ç—ã", "name": "–ß–∏–∑–∫–µ–π–∫ —è–≥–æ–¥–Ω—ã–π", "price": 1700.0},
    {"category": "–¢–æ—Ä—Ç—ã –∏ –¥–µ—Å–µ—Ä—Ç—ã", "name": "–ö—Ä–∞—Å–Ω—ã–π –±–∞—Ä—Ö–∞—Ç", "price": 1700.0},
    {"category": "–¢–æ—Ä—Ç—ã –∏ –¥–µ—Å–µ—Ä—Ç—ã", "name": "–≠–∫–ª–µ—Ä —Å –∫—Ä–µ–º–æ–º", "price": 800.0},
    {"category": "–¢–æ—Ä—Ç—ã –∏ –¥–µ—Å–µ—Ä—Ç—ã", "name": "–ü—Ä–æ—Ñ–∏—Ç—Ä–æ–ª—å", "price": 1200.0},
    {"category": "–¢–æ—Ä—Ç—ã –∏ –¥–µ—Å–µ—Ä—Ç—ã", "name": "–ú–∞–∫–∞—Ä–æ–Ω (1 —à—Ç)", "price": 400.0},
    {"category": "–¢–æ—Ä—Ç—ã –∏ –¥–µ—Å–µ—Ä—Ç—ã", "name": "–ú–∞–∫–∞—Ä–æ–Ω –Ω–∞–±–æ—Ä (6 —à—Ç)", "price": 2200.0},
    {"category": "–¢–æ—Ä—Ç—ã –∏ –¥–µ—Å–µ—Ä—Ç—ã", "name": "–ú–æ—Ä–æ–∂–µ–Ω–æ–µ —à–∞—Ä–∏–∫", "price": 500.0},

    # –°—ç–Ω–¥–≤–∏—á–∏ –∏ –∑–∞–∫—É—Å–∫–∏
    {"category": "–°—ç–Ω–¥–≤–∏—á–∏ –∏ –∑–∞–∫—É—Å–∫–∏", "name": "–°—ç–Ω–¥–≤–∏—á —Å –∫—É—Ä–∏—Ü–µ–π", "price": 1500.0},
    {"category": "–°—ç–Ω–¥–≤–∏—á–∏ –∏ –∑–∞–∫—É—Å–∫–∏", "name": "–°—ç–Ω–¥–≤–∏—á —Å –≤–µ—Ç—á–∏–Ω–æ–π", "price": 1400.0},
    {"category": "–°—ç–Ω–¥–≤–∏—á–∏ –∏ –∑–∞–∫—É—Å–∫–∏", "name": "–ö–ª–∞–±-—Å—ç–Ω–¥–≤–∏—á", "price": 1800.0},
    {"category": "–°—ç–Ω–¥–≤–∏—á–∏ –∏ –∑–∞–∫—É—Å–∫–∏", "name": "–ü–∞–Ω–∏–Ω–∏ —Å —Å—ã—Ä–æ–º", "price": 1200.0},
    {"category": "–°—ç–Ω–¥–≤–∏—á–∏ –∏ –∑–∞–∫—É—Å–∫–∏", "name": "–¢–æ—Å—Ç —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π", "price": 800.0},
    {"category": "–°—ç–Ω–¥–≤–∏—á–∏ –∏ –∑–∞–∫—É—Å–∫–∏", "name": "–ë–∞–≥–µ—Ç —Å —Å—ã—Ä–æ–º", "price": 1000.0},
    {"category": "–°—ç–Ω–¥–≤–∏—á–∏ –∏ –∑–∞–∫—É—Å–∫–∏", "name": "–ö—Ä—É–∞—Å—Å–∞–Ω-—Å—ç–Ω–¥–≤–∏—á", "price": 1300.0},

    # –°–∞–ª–∞—Ç—ã
    {"category": "–°–∞–ª–∞—Ç—ã", "name": "–¶–µ–∑–∞—Ä—å —Å –∫—É—Ä–∏—Ü–µ–π", "price": 2000.0},
    {"category": "–°–∞–ª–∞—Ç—ã", "name": "–ì—Ä–µ—á–µ—Å–∫–∏–π —Å–∞–ª–∞—Ç", "price": 1800.0},
    {"category": "–°–∞–ª–∞—Ç—ã", "name": "–°–∞–ª–∞—Ç —Å —Ç—É–Ω—Ü–æ–º", "price": 2200.0},
    {"category": "–°–∞–ª–∞—Ç—ã", "name": "–§—Ä—É–∫—Ç–æ–≤—ã–π —Å–∞–ª–∞—Ç", "price": 1500.0},
    {"category": "–°–∞–ª–∞—Ç—ã", "name": "–°–∞–ª–∞—Ç —Å –∞–≤–æ–∫–∞–¥–æ", "price": 1900.0},
]


async def populate_menu():
    """–ó–∞–ø–æ–ª–Ω—è–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –º–µ–Ω—é"""
    engine = create_async_engine(DATABASE_URL, echo=True)
    AsyncSessionLocal = async_sessionmaker(engine, class_=AsyncSession, expire_on_commit=False)
    
    # –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã
    async with engine.begin() as conn:
        await conn.run_sync(Base.metadata.create_all)
    
    # –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    async with AsyncSessionLocal() as session:
        for item_data in MENU_DATA:
            menu_item = MenuItem(**item_data)
            session.add(menu_item)
        
        await session.commit()
        print(f"‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ {len(MENU_DATA)} –ø–æ–∑–∏—Ü–∏–π –≤ –º–µ–Ω—é")


if __name__ == "__main__":
    print("üîÑ –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏...")
    asyncio.run(populate_menu())
    print("‚úÖ –ì–æ—Ç–æ–≤–æ!")
